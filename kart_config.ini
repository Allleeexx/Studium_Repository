# Kart ESC Motor Control Configuration
# ====================================

[motor_main]
# Main motor configuration
pin = 18
name = main_motor
min_pulse_width = 1.0    # milliseconds (minimum ESC signal)
max_pulse_width = 2.0    # milliseconds (maximum ESC signal)
neutral_pulse_width = 1.5 # milliseconds (neutral/stop signal)
frequency = 50           # Hz (standard servo frequency)

[motor_secondary]
# Secondary motor configuration (optional, for dual-motor setup)
pin = 19
name = secondary_motor
min_pulse_width = 1.0
max_pulse_width = 2.0
neutral_pulse_width = 1.5
frequency = 50

[safety_limits]
# Safety configuration
max_acceleration_rate = 0.05  # Maximum speed change per control cycle (0-1)
max_speed = 80.0             # Maximum speed percentage (0-100)
emergency_stop_timeout = 0.1  # Seconds before emergency stop engages
watchdog_timeout = 2.0       # Seconds before watchdog triggers emergency stop

[gpio_pins]
# GPIO pin assignments
emergency_stop = 21    # Emergency stop button input (active low, pull-up)
status_led = 20       # Status LED output
motor1_pwm = 18       # Motor 1 PWM output
motor2_pwm = 19       # Motor 2 PWM output (optional)

[logging]
# Logging configuration
log_file = /tmp/kart_motor.log
console_output = true
log_level = INFO        # DEBUG, INFO, WARNING, ERROR

[calibration]
# ESC calibration settings
calibration_time = 3    # Seconds for each calibration step
auto_calibrate = false  # Automatically calibrate on startup

[performance]
# Performance tuning (C++ version)
control_frequency = 50  # Hz (control loop frequency)
real_time_priority = 80 # Real-time priority (1-99, higher = more priority)
thread_count = 3        # Number of worker threads

[hardware]
# Hardware-specific settings
esc_type = standard     # standard, brushless, brushed
power_supply_voltage = 12.0  # Volts
max_current = 30.0      # Amperes (for monitoring, if available)

# Pin mapping for different hardware configurations
[pin_mapping_rpi4]
# Raspberry Pi 4 pin mapping
gpio18 = 12  # Physical pin 12
gpio19 = 35  # Physical pin 35
gpio20 = 38  # Physical pin 38
gpio21 = 40  # Physical pin 40

[pin_mapping_rpi3]
# Raspberry Pi 3 pin mapping
gpio18 = 12  # Physical pin 12
gpio19 = 35  # Physical pin 35
gpio20 = 38  # Physical pin 38
gpio21 = 40  # Physical pin 40